@inherits Options

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4 mt-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Web User Interface (Remote control)</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12" md="8">
                <MudTextField T="string" Label="Host" Value="WebUiAddress" ValueChanged="WebUiAddressChanged" Variant="Variant.Outlined" ShrinkLabel="true" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiAddress")" />
            </MudItem>
            <MudItem xs="12" md="4">
                <MudNumericField T="int" Label="Port" Value="WebUiPort" ValueChanged="WebUiPortChanged" Min="1" Max="@Options.MaxPortValue" Variant="Variant.Outlined" ShrinkLabel="true" Validation="WebUiPortValidation" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiPort")" />
            </MudItem>
            <MudItem xs="12">
                <FieldSwitch Label="Use UPnP / NAT-PMP to forward the port from my router" Value="WebUiUpnp" ValueChanged="WebUiUpnpChanged" data-test-id="@TestIdHelper.For("WebUiUpnp")" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Certificate</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12">
                <FieldSwitch Label="Use HTTPS instead of HTTP" Value="UseHttps" ValueChanged="UseHttpsChanged" data-test-id="@TestIdHelper.For("UseHttps")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Certificate" Value="WebUiHttpsCertPath" ValueChanged="WebUiHttpsCertPathChanged" Disabled="@(!UseHttps)" Variant="Variant.Outlined" ShrinkLabel="true" Validation="WebUiHttpsCertPathValidation" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiHttpsCertPath")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Key" Value="WebUiHttpsKeyPath" ValueChanged="WebUiHttpsKeyPathChanged" Disabled="@(!UseHttps)" Variant="Variant.Outlined" ShrinkLabel="true" Validation="WebUiHttpsKeyPathValidation" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiHttpsKeyPath")" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Authentication</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12">
                <MudTextField T="string" Label="Username" Value="WebUiUsername" ValueChanged="WebUiUsernameChanged" Variant="Variant.Outlined" ShrinkLabel="true" Validation="WebUiUsernameValidation" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiUsername")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Password" Value="WebUiPassword" ValueChanged="WebUiPasswordChanged" InputType="InputType.Password" Variant="Variant.Outlined" ShrinkLabel="true" Validation="WebUiPasswordValidation" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiPassword")" />
            </MudItem>
            <MudItem xs="12">
                <FieldSwitch Label="Bypass authentication for clients on localhost" Value="BypassLocalAuth" ValueChanged="BypassLocalAuthChanged" data-test-id="@TestIdHelper.For("BypassLocalAuth")" />
            </MudItem>
            <MudItem xs="12">
                <FieldSwitch Label="Bypass authentication for clients in whitelisted IP subnets" Value="BypassAuthSubnetWhitelistEnabled" ValueChanged="BypassAuthSubnetWhitelistEnabledChanged" data-test-id="@TestIdHelper.For("BypassAuthSubnetWhitelistEnabled")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Trackers" Value="BypassAuthSubnetWhitelist" ValueChanged="BypassAuthSubnetWhitelistChanged" Lines="5" Disabled="@(!BypassAuthSubnetWhitelistEnabled)" Variant="Variant.Outlined" ShrinkLabel="true" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("BypassAuthSubnetWhitelist")" />
            </MudItem>
            <MudItem xs="12">
                <MudNumericField T="int" Label="Ban client after consecutive failures" Value="WebUiMaxAuthFailCount" ValueChanged="WebUiMaxAuthFailCountChanged" Min="0" Variant="Variant.Outlined" ShrinkLabel="true" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiMaxAuthFailCount")" />
            </MudItem>
            <MudItem xs="12">
                <MudNumericField T="int" Label="ban for" Value="WebUiBanDuration" ValueChanged="WebUiBanDurationChanged" Min="0" Variant="Variant.Outlined" ShrinkLabel="true" Adornment="Adornment.End" AdornmentText="seconds" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiBanDuration")" />
            </MudItem>
            <MudItem xs="12">
                <MudNumericField T="int" Label="Session timeout" Value="WebUiSessionTimeout" ValueChanged="WebUiSessionTimeoutChanged" Min="0" Variant="Variant.Outlined" ShrinkLabel="true" Adornment="Adornment.End" AdornmentText="seconds" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiSessionTimeout")" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Alternative Web UI</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12">
                <FieldSwitch Label="Use alternative Web UI" Value="AlternativeWebuiEnabled" ValueChanged="AlternativeWebuiEnabledChanged" data-test-id="@TestIdHelper.For("AlternativeWebuiEnabled")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Files location" Value="AlternativeWebuiPath" ValueChanged="AlternativeWebuiPathChanged" Variant="Variant.Outlined" ShrinkLabel="true" Validation="AlternativeWebuiPathValidation" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("AlternativeWebuiPath")" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Security</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12">
                <FieldSwitch Label="Enable clickjacking protection" Value="WebUiClickjackingProtectionEnabled" ValueChanged="WebUiClickjackingProtectionEnabledChanged" data-test-id="@TestIdHelper.For("WebUiClickjackingProtectionEnabled")" />
            </MudItem>
            <MudItem xs="12">
                <FieldSwitch Label="Enable Cross-Site Request Forgery (CSRF) protection" Value="WebUiCsrfProtectionEnabled" ValueChanged="WebUiCsrfProtectionEnabledChanged" data-test-id="@TestIdHelper.For("WebUiCsrfProtectionEnabled")" />
            </MudItem>
            <MudItem xs="12">
                <FieldSwitch Label="Enable cookie Secure flag (requires HTTPS)" Value="WebUiSecureCookieEnabled" ValueChanged="WebUiSecureCookieEnabledChanged" data-test-id="@TestIdHelper.For("WebUiSecureCookieEnabled")" />
            </MudItem>
            <MudItem xs="12">
                <FieldSwitch Label="Enable Host header validation" Value="WebUiHostHeaderValidationEnabled" ValueChanged="WebUiHostHeaderValidationEnabledChanged" data-test-id="@TestIdHelper.For("WebUiHostHeaderValidationEnabled")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Server domains" Value="WebUiDomainList" ValueChanged="WebUiDomainListChanged" Lines="5" Disabled="@(!WebUiHostHeaderValidationEnabled)" Variant="Variant.Outlined" ShrinkLabel="true" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiDomainList")" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Http Headers</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12">
                <FieldSwitch Label="Add custom HTTP headers" Value="WebUiUseCustomHttpHeadersEnabled" ValueChanged="WebUiUseCustomHttpHeadersEnabledChanged" data-test-id="@TestIdHelper.For("WebUiUseCustomHttpHeadersEnabled")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Server domains" Value="WebUiCustomHttpHeaders" ValueChanged="WebUiCustomHttpHeadersChanged" Lines="5" Disabled="@(!WebUiUseCustomHttpHeadersEnabled)" Variant="Variant.Outlined" ShrinkLabel="true" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiCustomHttpHeaders")" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Reverse Proxy</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12">
                <FieldSwitch Label="Enable reverse proxy support" Value="WebUiReverseProxyEnabled" ValueChanged="WebUiReverseProxyEnabledChanged" data-test-id="@TestIdHelper.For("WebUiReverseProxyEnabled")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Trusted proxies list" Value="WebUiReverseProxiesList" ValueChanged="WebUiReverseProxiesListChanged" Lines="5" Disabled="@(!WebUiReverseProxyEnabled)" Variant="Variant.Outlined" ShrinkLabel="true" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("WebUiReverseProxiesList")" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

<MudCard Elevation="1" Class="ml-4 mr-4 mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.subtitle2">Dynamic Domain Name</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="pt-0">
        <MudGrid>
            <MudItem xs="12">
                <FieldSwitch Label="Update my dynamic domain name" Value="DyndnsEnabled" ValueChanged="DyndnsEnabledChanged" data-test-id="@TestIdHelper.For("DyndnsEnabled")" />
            </MudItem>
            <MudItem xs="8">
                <MudSelect T="int" Value="DyndnsService" ValueChanged="DyndnsServiceChanged" Disabled="@(!DyndnsEnabled)" Variant="Variant.Outlined" ShrinkLabel="true" data-test-id="@TestIdHelper.For("DyndnsService")">
                    <MudSelectItem Value="0">DynDNS</MudSelectItem>
                    <MudSelectItem Value="1">NO-IP</MudSelectItem>
                </MudSelect>
            </MudItem>
            <MudItem xs="4">
                <MudButton OnClick="RegisterDyndnsService" Disabled="@(!DyndnsEnabled)" Variant="Variant.Filled">Register</MudButton>
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Domain name" Value="DyndnsDomain" ValueChanged="DyndnsDomainChanged" Disabled="@(!DyndnsEnabled)" Variant="Variant.Outlined" ShrinkLabel="true" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("DyndnsDomain")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Username" Value="DyndnsUsername" ValueChanged="DyndnsUsernameChanged" Disabled="@(!DyndnsEnabled)" Variant="Variant.Outlined" ShrinkLabel="true" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("DyndnsUsername")" />
            </MudItem>
            <MudItem xs="12">
                <MudTextField T="string" Label="Password" Value="DyndnsPassword" ValueChanged="DyndnsPasswordChanged" Disabled="@(!DyndnsEnabled)" InputType="InputType.Password" Variant="Variant.Outlined" ShrinkLabel="true" Immediate="true" DebounceInterval="300" data-test-id="@TestIdHelper.For("DyndnsPassword")" />
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>
